(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([typeof document === "object" ? document.currentScript : undefined, {

"[project]/src/components/Inpage_header.jsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>Inpage_header)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/navigation.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$icons$2f$lu$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/react-icons/lu/index.mjs [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$icons$2f$ci$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/react-icons/ci/index.mjs [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
"use client";
;
;
;
function Inpage_header({ title, onExport }) {
    _s();
    const router = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRouter"])();
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "flex text-2xl md:text-4xl p-4 md:p-6 lg:p-10 justify-between items-center",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("a", {
                href: "#",
                onClick: (e)=>{
                    e.preventDefault();
                    router.back();
                },
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$icons$2f$lu$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LuUndo2"], {
                    className: "text-[#FFDD4A]"
                }, void 0, false, {
                    fileName: "[project]/src/components/Inpage_header.jsx",
                    lineNumber: 12,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/Inpage_header.jsx",
                lineNumber: 11,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h1", {
                className: "text-center w-full font-bold",
                children: title
            }, void 0, false, {
                fileName: "[project]/src/components/Inpage_header.jsx",
                lineNumber: 14,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("a", {
                href: "#",
                onClick: (e)=>{
                    e.preventDefault();
                    onExport();
                },
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$react$2d$icons$2f$ci$2f$index$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CiExport"], {
                    className: "text-[#FFDD4A]"
                }, void 0, false, {
                    fileName: "[project]/src/components/Inpage_header.jsx",
                    lineNumber: 16,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/Inpage_header.jsx",
                lineNumber: 15,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/components/Inpage_header.jsx",
        lineNumber: 10,
        columnNumber: 5
    }, this);
}
_s(Inpage_header, "fN7XvhJ+p5oE6+Xlo0NJmXpxjC8=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useRouter"]
    ];
});
_c = Inpage_header;
var _c;
__turbopack_context__.k.register(_c, "Inpage_header");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/components/pt_attendance_table.jsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>PTAttendanceTable)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$Inpage_header$2e$jsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/Inpage_header.jsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xlsx$2f$xlsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/xlsx/xlsx.mjs [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
'use client';
;
;
;
function PTAttendanceTable({ trainerId, name }) {
    _s();
    const [attendanceData, setAttendanceData] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [existingAttendance, setExistingAttendance] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [loading, setLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    const [error, setError] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [attendance, setAttendance] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])({});
    const [saveStatus, setSaveStatus] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [selectedMonth, setSelectedMonth] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(new Date().getMonth()); // Default to current month (0-11)
    const options = [
        'Select Month',
        'January',
        'February',
        'March',
        'April',
        'May',
        'June',
        'July',
        'August',
        'September',
        'October',
        'November',
        'December'
    ];
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "PTAttendanceTable.useEffect": ()=>{
            const fetchData = {
                "PTAttendanceTable.useEffect.fetchData": async ()=>{
                    try {
                        setLoading(true);
                        // Fetch membership plans (users)
                        const membersResponse = await fetch('/api/fetch_membership_plans');
                        const membersResult = await membersResponse.json();
                        // Fetch existing attendance data
                        const attendanceResponse = await fetch('/api/fetch_attendance');
                        const attendanceResult = await attendanceResponse.json();
                        console.log('Members API response:', membersResult);
                        console.log('Attendance API response:', attendanceResult);
                        if (membersResult.success) {
                            // Filter members by trainer ID
                            const filteredMembers = membersResult.data.filter({
                                "PTAttendanceTable.useEffect.fetchData.filteredMembers": (record)=>record.trainer === trainerId
                            }["PTAttendanceTable.useEffect.fetchData.filteredMembers"]);
                            console.log('Filtered members:', filteredMembers);
                            setAttendanceData(filteredMembers);
                            // Filter existing attendance by trainer ID
                            const filteredAttendance = attendanceResult.data.filter({
                                "PTAttendanceTable.useEffect.fetchData.filteredAttendance": (record)=>record.trainer_id === trainerId
                            }["PTAttendanceTable.useEffect.fetchData.filteredAttendance"]);
                            console.log('Filtered attendance:', filteredAttendance);
                            setExistingAttendance(filteredAttendance);
                        } else {
                            setError(membersResult.error || 'Failed to fetch data');
                        }
                    } catch (err) {
                        console.error('Error fetching data:', err);
                        setError('Error fetching data');
                    } finally{
                        setLoading(false);
                    }
                }
            }["PTAttendanceTable.useEffect.fetchData"];
            fetchData();
        }
    }["PTAttendanceTable.useEffect"], [
        trainerId
    ]);
    // Get days for the selected month
    const getMonthDays = ()=>{
        const now = new Date();
        const year = now.getFullYear();
        const daysInMonth = new Date(year, selectedMonth + 1, 0).getDate();
        return Array.from({
            length: daysInMonth
        }, (_, i)=>i + 1);
    };
    const monthDays = getMonthDays();
    const currentMonth = selectedMonth >= 0 && selectedMonth < 12 ? `${options[selectedMonth + 1]} ${new Date().getFullYear()}` : 'Select a month';
    // Initialize attendance state when data or selected month changes
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "PTAttendanceTable.useEffect": ()=>{
            if (attendanceData.length > 0) {
                const initialAttendance = {};
                const currentYear = new Date().getFullYear();
                const currentMonthNum = selectedMonth + 1; // 1-12 for comparison
                // Initialize attendance structure
                attendanceData.forEach({
                    "PTAttendanceTable.useEffect": (user)=>{
                        initialAttendance[user.user_id] = {};
                        monthDays.forEach({
                            "PTAttendanceTable.useEffect": (day)=>{
                                initialAttendance[user.user_id][day] = ''; // Default empty
                            }
                        }["PTAttendanceTable.useEffect"]);
                    }
                }["PTAttendanceTable.useEffect"]);
                // Fill existing attendance data, converting UTC to IST
                existingAttendance.forEach({
                    "PTAttendanceTable.useEffect": (record)=>{
                        // Convert UTC date to IST
                        const utcDate = new Date(record.date);
                        const istDate = new Date(utcDate.getTime() + 5.5 * 60 * 60 * 1000); // Add 5.5 hours for IST
                        const recordYear = istDate.getFullYear();
                        const recordMonth = istDate.getMonth() + 1;
                        const recordDay = istDate.getDate();
                        // Only fill if the record is from the selected month and year
                        if (recordYear === currentYear && recordMonth === currentMonthNum) {
                            if (initialAttendance[record.user_id]) {
                                initialAttendance[record.user_id][recordDay] = record.status;
                            }
                        }
                    }
                }["PTAttendanceTable.useEffect"]);
                setAttendance(initialAttendance);
            }
        }
    }["PTAttendanceTable.useEffect"], [
        attendanceData,
        existingAttendance,
        selectedMonth
    ]);
    // Handle attendance change
    const handleAttendanceChange = (userId, day, value)=>{
        setAttendance((prev)=>({
                ...prev,
                [userId]: {
                    ...prev[userId],
                    [day]: value
                }
            }));
    };
    // Handle save button click
    const handleSaveAttendance = async ()=>{
        try {
            setSaveStatus('Saving...');
            const records = [];
            const year = new Date().getFullYear();
            const month = (selectedMonth + 1).toString().padStart(2, '0');
            // Convert existingAttendance to a lookup for quick comparison
            const existingAttendanceMap = {};
            existingAttendance.forEach((record)=>{
                const utcDate = new Date(record.date);
                const istDate = new Date(utcDate.getTime() + 5.5 * 60 * 60 * 1000); // Convert to IST
                const recordYear = istDate.getFullYear();
                const recordMonth = istDate.getMonth() + 1;
                const recordDay = istDate.getDate();
                if (recordYear === year && recordMonth === Number(month)) {
                    existingAttendanceMap[`${record.user_id}-${recordDay}`] = record.status;
                }
            });
            // Collect only new or changed attendance records
            Object.keys(attendance).forEach((userId)=>{
                monthDays.forEach((day)=>{
                    const status = attendance[userId][day];
                    const key = `${userId}-${day}`;
                    const existingStatus = existingAttendanceMap[key];
                    // Include record if it's new (no existing status) or changed (different status)
                    if ((status === 'P' || status === 'A') && status !== existingStatus) {
                        const formattedDate = `${year}-${month}-${day.toString().padStart(2, '0')}`;
                        records.push({
                            trainer_id: trainerId,
                            user_id: userId,
                            date: formattedDate,
                            status: status
                        });
                    }
                });
            });
            if (records.length === 0) {
                setSaveStatus('No new or changed attendance data to save');
                return;
            }
            const response = await fetch('/api/add_attendance', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    records
                })
            });
            const result = await response.json();
            if (result.success) {
                setSaveStatus('Saved successfully');
                // Update existingAttendance state to reflect saved changes
                setExistingAttendance((prev)=>[
                        ...prev,
                        ...records.map((record)=>({
                                trainer_id: record.trainer_id,
                                user_id: record.user_id,
                                date: record.date,
                                status: record.status
                            }))
                    ]);
            } else {
                setSaveStatus(`Failed: ${result.error}`);
            }
        } catch (error) {
            setSaveStatus('Error saving');
            console.error('Error saving attendance:', error);
        } finally{
            setTimeout(()=>setSaveStatus(null), 3000);
        }
    };
    // Handle export to Excel
    const handleExportToExcel = ()=>{
        const monthName = selectedMonth >= 0 && selectedMonth < 12 ? options[selectedMonth + 1] : 'Attendance';
        const year = new Date().getFullYear();
        // Prepare data for Excel
        const exportData = attendanceData.map((record)=>{
            const userAttendance = attendance[record.user_id] || {};
            const row = {
                'User ID': record.user_id,
                'Name': record.name,
                'Month': monthName
            };
            // Add attendance for each day
            monthDays.forEach((day)=>{
                row[`Day ${day}`] = userAttendance[day] || '-';
            });
            // Add totals
            const { presentDays, absentDays } = calculateTotals(record.user_id);
            row['Total Present'] = presentDays;
            row['Total Absent'] = absentDays;
            return row;
        });
        // Create worksheet
        const worksheet = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xlsx$2f$xlsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["utils"].json_to_sheet(exportData);
        // Set column widths
        const colWidths = [
            {
                wch: 10
            },
            {
                wch: 20
            },
            {
                wch: 15
            },
            ...monthDays.map(()=>({
                    wch: 8
                })),
            {
                wch: 12
            },
            {
                wch: 12
            } // Total Absent
        ];
        worksheet['!cols'] = colWidths;
        // Create workbook and append worksheet
        const workbook = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xlsx$2f$xlsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["utils"].book_new();
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xlsx$2f$xlsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["utils"].book_append_sheet(workbook, worksheet, 'Attendance');
        // Export to file
        const fileName = `Attendance_${name}_${trainerId}_${monthName}_${year}.xlsx`;
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$xlsx$2f$xlsx$2e$mjs__$5b$app$2d$client$5d$__$28$ecmascript$29$__["writeFile"])(workbook, fileName);
    };
    const getAttendanceValue = (userId, day)=>{
        return attendance[userId]?.[day] || '';
    };
    // Calculate totals for a user
    const calculateTotals = (userId)=>{
        const userAttendance = attendance[userId] || {};
        const presentDays = Object.values(userAttendance).filter((val)=>val === 'P').length;
        const absentDays = Object.values(userAttendance).filter((val)=>val === 'A').length;
        return {
            presentDays,
            absentDays
        };
    };
    // Handle month change
    const handleMonthChange = (e)=>{
        const monthIndex = options.indexOf(e.target.value) - 1; // Convert to 0-11
        setSelectedMonth(monthIndex >= 0 ? monthIndex : new Date().getMonth());
    };
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "",
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$Inpage_header$2e$jsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
                className: "text-2xl md:text-3xl font-bold mb-6",
                title: `PT Attendance of ${name} - ${trainerId}`,
                onExport: handleExportToExcel
            }, void 0, false, {
                fileName: "[project]/src/components/pt_attendance_table.jsx",
                lineNumber: 284,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "mt-4 flex justify-between items-center",
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                        className: "flex items-center space-x-4",
                        children: [
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                                className: "text-xl font-semibold text-gray-100",
                                children: currentMonth
                            }, void 0, false, {
                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                lineNumber: 292,
                                columnNumber: 11
                            }, this),
                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("select", {
                                value: selectedMonth >= 0 && selectedMonth < 12 ? options[selectedMonth + 1] : options[0],
                                onChange: handleMonthChange,
                                className: "px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-700 text-gray-100",
                                children: options.map((option, index)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                        value: option,
                                        children: option
                                    }, index, false, {
                                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                                        lineNumber: 301,
                                        columnNumber: 15
                                    }, this))
                            }, void 0, false, {
                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                lineNumber: 295,
                                columnNumber: 11
                            }, this)
                        ]
                    }, void 0, true, {
                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                        lineNumber: 291,
                        columnNumber: 9
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                        onClick: handleSaveAttendance,
                        className: `
            px-4 py-2 text-white rounded 
            focus:outline-none focus:ring-2 focus:ring-blue-500
            ${saveStatus === 'Saving...' ? 'bg-blue-600 cursor-not-allowed' : saveStatus === 'Saved' ? 'bg-green-500 hover:bg-green-600' : saveStatus?.includes('Failed') || saveStatus?.includes('Error') ? 'bg-red-500 hover:bg-red-600' : 'bg-blue-500 hover:bg-blue-600'}
          `,
                        disabled: saveStatus === 'Saving...' || selectedMonth < 0,
                        children: saveStatus || 'Save Attendance'
                    }, void 0, false, {
                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                        lineNumber: 308,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/src/components/pt_attendance_table.jsx",
                lineNumber: 290,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                className: "overflow-x-auto",
                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("table", {
                    className: "min-w-full bg-gray-700 border border-gray-300 rounded-lg",
                    children: [
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("thead", {
                            className: "bg-[#2B2E32]",
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tr", {
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("th", {
                                        className: "py-3 px-4 text-left sticky left-0 bg-[#2B2E32] z-10",
                                        children: "User ID"
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                                        lineNumber: 333,
                                        columnNumber: 15
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("th", {
                                        className: "py-3 px-4 text-left sticky left-20 bg-[#2B2E32] z-10",
                                        children: "Name"
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                                        lineNumber: 334,
                                        columnNumber: 15
                                    }, this),
                                    monthDays.map((day)=>{
                                        const date = new Date(new Date().getFullYear(), selectedMonth, day);
                                        if (date.getDay() !== 0) {
                                            return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("th", {
                                                className: "py-3 px-2 text-center min-w-[60px]",
                                                children: day
                                            }, day, false, {
                                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                lineNumber: 339,
                                                columnNumber: 21
                                            }, this);
                                        }
                                        return null;
                                    }),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("th", {
                                        className: "py-3 px-4 text-center bg-[#2B2E32] z-10",
                                        children: "Total Present"
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                                        lineNumber: 346,
                                        columnNumber: 15
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("th", {
                                        className: "py-3 px-4 text-center bg-[#2B2E32] z-10",
                                        children: "Total Absent"
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                                        lineNumber: 347,
                                        columnNumber: 15
                                    }, this)
                                ]
                            }, void 0, true, {
                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                lineNumber: 332,
                                columnNumber: 13
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/src/components/pt_attendance_table.jsx",
                            lineNumber: 331,
                            columnNumber: 11
                        }, this),
                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tbody", {
                            className: "bg-gray-800 overflow-y-scroll",
                            children: loading ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tr", {
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                    colSpan: monthDays.length + 4,
                                    className: "py-3 px-4 text-center text-gray-500",
                                    children: "Loading..."
                                }, void 0, false, {
                                    fileName: "[project]/src/components/pt_attendance_table.jsx",
                                    lineNumber: 354,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                lineNumber: 353,
                                columnNumber: 15
                            }, this) : error ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tr", {
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                    colSpan: monthDays.length + 4,
                                    className: "py-3 px-4 text-center text-red-500",
                                    children: error
                                }, void 0, false, {
                                    fileName: "[project]/src/components/pt_attendance_table.jsx",
                                    lineNumber: 360,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                lineNumber: 359,
                                columnNumber: 15
                            }, this) : selectedMonth < 0 ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tr", {
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                    colSpan: monthDays.length + 4,
                                    className: "py-3 px-4 text-center text-gray-500",
                                    children: "Please select a month"
                                }, void 0, false, {
                                    fileName: "[project]/src/components/pt_attendance_table.jsx",
                                    lineNumber: 366,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                lineNumber: 365,
                                columnNumber: 15
                            }, this) : attendanceData.length > 0 ? (()=>{
                                const ptMembers = attendanceData.filter((record)=>record.plan_name === "PT");
                                if (ptMembers.length === 0) {
                                    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tr", {
                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                            colSpan: monthDays.length + 4,
                                            className: "py-3 px-4 text-left text-gray-100",
                                            children: "No member has taken PT under this trainer"
                                        }, void 0, false, {
                                            fileName: "[project]/src/components/pt_attendance_table.jsx",
                                            lineNumber: 376,
                                            columnNumber: 23
                                        }, this)
                                    }, void 0, false, {
                                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                                        lineNumber: 375,
                                        columnNumber: 21
                                    }, this);
                                }
                                return ptMembers.map((record)=>{
                                    const { presentDays, absentDays } = calculateTotals(record.user_id);
                                    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tr", {
                                        className: "border-b hover:bg-gray-900",
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                                className: "py-3 px-4 font-medium sticky left-0 bg-[#2B2E32] z-10 border-r",
                                                children: record.user_id
                                            }, void 0, false, {
                                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                lineNumber: 387,
                                                columnNumber: 23
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                                className: "py-3 px-4 font-medium sticky left-20 bg-[#2B2E32] z-10 border-r",
                                                children: record.name
                                            }, void 0, false, {
                                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                lineNumber: 390,
                                                columnNumber: 23
                                            }, this),
                                            monthDays.map((day)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                                    className: "py-2 px-2 text-center",
                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("select", {
                                                        value: getAttendanceValue(record.user_id, day),
                                                        onChange: (e)=>handleAttendanceChange(record.user_id, day, e.target.value),
                                                        className: "w-full px-1 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",
                                                        disabled: selectedMonth < 0,
                                                        children: [
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                                value: "",
                                                                children: "-"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                                lineNumber: 401,
                                                                columnNumber: 29
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                                value: "P",
                                                                className: "text-green-600",
                                                                children: "P"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                                lineNumber: 402,
                                                                columnNumber: 29
                                                            }, this),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                                value: "A",
                                                                className: "text-red-600",
                                                                children: "A"
                                                            }, void 0, false, {
                                                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                                lineNumber: 405,
                                                                columnNumber: 29
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                        lineNumber: 395,
                                                        columnNumber: 27
                                                    }, this)
                                                }, day, false, {
                                                    fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                    lineNumber: 394,
                                                    columnNumber: 25
                                                }, this)),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                                className: "py-3 px-4 font-medium text-center bg-[#2B2E32] z-10 border-l text-green-400",
                                                children: presentDays
                                            }, void 0, false, {
                                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                lineNumber: 411,
                                                columnNumber: 23
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                                className: "py-3 px-4 font-medium text-center bg-[#2B2E32] z-10 border-l text-red-400",
                                                children: absentDays
                                            }, void 0, false, {
                                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                                lineNumber: 414,
                                                columnNumber: 23
                                            }, this)
                                        ]
                                    }, `${record.user_id}-${record.bill_no}`, true, {
                                        fileName: "[project]/src/components/pt_attendance_table.jsx",
                                        lineNumber: 386,
                                        columnNumber: 21
                                    }, this);
                                });
                            })() : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("tr", {
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("td", {
                                    colSpan: monthDays.length + 4,
                                    className: "py-3 px-4 text-center text-gray-500",
                                    children: "No member has taken PT under this trainer"
                                }, void 0, false, {
                                    fileName: "[project]/src/components/pt_attendance_table.jsx",
                                    lineNumber: 423,
                                    columnNumber: 17
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/src/components/pt_attendance_table.jsx",
                                lineNumber: 422,
                                columnNumber: 15
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/src/components/pt_attendance_table.jsx",
                            lineNumber: 351,
                            columnNumber: 11
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "[project]/src/components/pt_attendance_table.jsx",
                    lineNumber: 330,
                    columnNumber: 9
                }, this)
            }, void 0, false, {
                fileName: "[project]/src/components/pt_attendance_table.jsx",
                lineNumber: 329,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/src/components/pt_attendance_table.jsx",
        lineNumber: 283,
        columnNumber: 5
    }, this);
}
_s(PTAttendanceTable, "LPBjCsbEc1AqnuO+2qfuUqbbMUY=");
_c = PTAttendanceTable;
var _c;
__turbopack_context__.k.register(_c, "PTAttendanceTable");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
"[project]/src/app/(pages)/pt-attendance/page.jsx [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname, k: __turbopack_refresh__, m: module } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>PTAttendance)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$pt_attendance_table$2e$jsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/components/pt_attendance_table.jsx [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/navigation.js [app-client] (ecmascript)");
;
var _s = __turbopack_context__.k.signature();
'use client';
;
;
function PTAttendance() {
    _s();
    const searchParams = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useSearchParams"])();
    const trainerId = searchParams.get('trainer_id');
    const name = searchParams.get('name');
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        className: "p-4 md:p-6 lg:p-10",
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$src$2f$components$2f$pt_attendance_table$2e$jsx__$5b$app$2d$client$5d$__$28$ecmascript$29$__["default"], {
            trainerId: trainerId,
            name: name
        }, void 0, false, {
            fileName: "[project]/src/app/(pages)/pt-attendance/page.jsx",
            lineNumber: 12,
            columnNumber: 7
        }, this)
    }, void 0, false, {
        fileName: "[project]/src/app/(pages)/pt-attendance/page.jsx",
        lineNumber: 11,
        columnNumber: 5
    }, this);
}
_s(PTAttendance, "a+DZx9DY26Zf8FVy1bxe3vp9l1w=", false, function() {
    return [
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$navigation$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useSearchParams"]
    ];
});
_c = PTAttendance;
var _c;
__turbopack_context__.k.register(_c, "PTAttendance");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(module, globalThis.$RefreshHelpers$);
}
}}),
}]);

//# sourceMappingURL=src_f046efa9._.js.map