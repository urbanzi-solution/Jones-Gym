{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/Remarks_form.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function RemarksForm({ user_id, onSave, onCancel }) {\r\n  const [name, setName] = useState(\"\");\r\n  const [remarks, setRemarks] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user_id) {\r\n      setName(user_id);\r\n    }\r\n  }, [user_id]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch('/api/add_Remark', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ user_id: name, description: remarks }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const { error } = await response.json();\r\n        throw new Error(error || 'Failed to add remark');\r\n      }\r\n\r\n      if (onSave) onSave({ name, remarks });\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      {/* User ID Field */}\r\n      <div>\r\n        <label className=\"block text-gray-300 mb-2\">User ID</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-white\"\r\n          placeholder=\"Enter user ID\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          disabled={isSubmitting}\r\n          maxLength={10}\r\n        />\r\n      </div>\r\n\r\n      {/* Remarks Field */}\r\n      <div>\r\n        <label className=\"block text-gray-300 mb-2\">Remarks</label>\r\n        <textarea\r\n          rows={4}\r\n          className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-white\"\r\n          placeholder=\"Enter remarks\"\r\n          value={remarks}\r\n          onChange={(e) => setRemarks(e.target.value)}\r\n          disabled={isSubmitting}\r\n          maxLength={50}\r\n        />\r\n      </div>\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"text-red-500 text-sm\">{error}</div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"w-full border border-gray-500 text-white rounded-lg py-3 hover:bg-[#1a1a1a] transition\"\r\n          disabled={isSubmitting}\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-[#FFDD4A] text-black font-bold py-3 rounded-lg hover:bg-[#ffd700] transition\"\r\n          disabled={isSubmitting}\r\n        >\r\n          {isSubmitting ? 'Saving...' : 'Save Remarks'}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":";;;;AACA;;;AADA;;AAGe,SAAS,YAAY,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE;;IAC/D,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;iCAAE;YACR,IAAI,SAAS;gBACX,QAAQ;YACV;QACF;gCAAG;QAAC;KAAQ;IAEZ,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,gBAAgB;QAChB,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,mBAAmB;gBAC9C,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE,SAAS;oBAAM,aAAa;gBAAQ;YAC7D;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,SAAS;YAC3B;YAEA,IAAI,QAAQ,OAAO;gBAAE;gBAAM;YAAQ;QACrC,EAAE,OAAO,KAAK;YACZ,SAAS,IAAI,OAAO;QACtB,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAc,WAAU;;0BAEtC,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAA2B;;;;;;kCAC5C,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,UAAU;wBACV,WAAW;;;;;;;;;;;;0BAKf,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAA2B;;;;;;kCAC5C,6LAAC;wBACC,MAAM;wBACN,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wBAC1C,UAAU;wBACV,WAAW;;;;;;;;;;;;YAKd,uBACC,6LAAC;gBAAI,WAAU;0BAAwB;;;;;;0BAIzC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,UAAU;kCACX;;;;;;kCAGD,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,UAAU;kCAET,eAAe,cAAc;;;;;;;;;;;;;;;;;;AAKxC;GA9FwB;KAAA","debugId":null}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/Blacklist_form.jsx"],"sourcesContent":["// src\\components\\Blacklist_form.jsx\r\n\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport default function BlacklistForm({ user_id, onSave, onCancel }) {\r\n  const [name, setName] = useState(\"\");\r\n  const [reason, setReason] = useState(\"\");\r\n  const [error, setError] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user_id) {\r\n      setName(user_id);\r\n    }\r\n  }, [user_id]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch('/api/add_blacklist', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ user_id: name, description: reason }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const { error } = await response.json();\r\n        throw new Error(error || 'Failed to add blacklist entry');\r\n      }\r\n\r\n      if (onSave) onSave({ name, reason });\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      {/* Name Field */}\r\n      <div>\r\n        <label className=\"block text-gray-300 mb-2\">User ID</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-white\"\r\n          placeholder=\"Enter user ID\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n          disabled={isSubmitting}\r\n        />\r\n      </div>\r\n\r\n      {/* Reason Field */}\r\n      <div>\r\n        <label className=\"block text-gray-300 mb-2\">Reason</label>\r\n        <textarea\r\n          rows={4}\r\n          className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-white\"\r\n          placeholder=\"Enter reason\"\r\n          value={reason}\r\n          onChange={(e) => setReason(e.target.value)}\r\n          disabled={isSubmitting}\r\n        />\r\n      </div>\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"text-red-500 text-sm\">{error}</div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"w-full border border-gray-500 text-white rounded-lg py-3 hover:bg-[#1a1a1a] transition\"\r\n          disabled={isSubmitting}\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-[#FFDD4A] text-black font-bold py-3 rounded-lg hover:bg-[#ffd700] transition\"\r\n          disabled={isSubmitting}\r\n        >\r\n          {isSubmitting ? 'Adding...' : 'Add To Blacklist'}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,oCAAoC;;;;;AAEpC;;;AADA;;AAGe,SAAS,cAAc,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE;;IACjE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,SAAS;gBACX,QAAQ;YACV;QACF;kCAAG;QAAC;KAAQ;IAEZ,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,gBAAgB;QAChB,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,sBAAsB;gBACjD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE,SAAS;oBAAM,aAAa;gBAAO;YAC5D;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI;gBACrC,MAAM,IAAI,MAAM,SAAS;YAC3B;YAEA,IAAI,QAAQ,OAAO;gBAAE;gBAAM;YAAO;QACpC,EAAE,OAAO,KAAK;YACZ,SAAS,IAAI,OAAO;QACtB,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,6LAAC;QAAK,UAAU;QAAc,WAAU;;0BAEtC,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAA2B;;;;;;kCAC5C,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,UAAU;;;;;;;;;;;;0BAKd,6LAAC;;kCACC,6LAAC;wBAAM,WAAU;kCAA2B;;;;;;kCAC5C,6LAAC;wBACC,MAAM;wBACN,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wBACzC,UAAU;;;;;;;;;;;;YAKb,uBACC,6LAAC;gBAAI,WAAU;0BAAwB;;;;;;0BAIzC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,MAAK;wBACL,SAAS;wBACT,WAAU;wBACV,UAAU;kCACX;;;;;;kCAGD,6LAAC;wBACC,MAAK;wBACL,WAAU;wBACV,UAAU;kCAET,eAAe,cAAc;;;;;;;;;;;;;;;;;;AAKxC;GA5FwB;KAAA","debugId":null}},
    {"offset": {"line": 352, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/edit_user_data.jsx"],"sourcesContent":["// src/components/edit_user_data.jsx\r\n\"use client\";\r\nimport { useState } from \"react\";\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function EditUserData({ member, onCancel }) {\r\n  const router = useRouter();\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [saveSuccess, setSaveSuccess] = useState(false);\r\n  const [countdown, setCountdown] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  const convertDate = (dateString) => {\r\n    if (!dateString) return \"\";\r\n    const date = new Date(dateString);\r\n    const year = date.getFullYear();\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    return `${year}-${month}-${day}`;\r\n  };\r\n\r\n  // Initialize state with member data\r\n  const [formData, setFormData] = useState({\r\n    user_id: member?.user_id || \"\",\r\n    name: member?.name || \"\",\r\n    gender: member?.gender || \"\",\r\n    date_of_birth: convertDate(member?.date_of_birth) || \"\",\r\n    location: member?.location || \"\",\r\n    phone_no: member?.phone_no || \"\",\r\n    whatsapp_no: member?.whatsapp_no || \"\",\r\n    joining_date: convertDate(member?.joining_date) || \"\",\r\n    reason: member?.reason || \"\"\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSaving(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch('/api/edit_user_data', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          ...formData,\r\n          user_id: member.user_id\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(result.error || 'Failed to update user data');\r\n      }\r\n\r\n      // Show success message with countdown\r\n      setSaveSuccess(true);\r\n      setCountdown(3);\r\n      \r\n      // Countdown timer\r\n      const countdownInterval = setInterval(() => {\r\n        setCountdown(prev => {\r\n          if (prev <= 1) {\r\n            clearInterval(countdownInterval);\r\n            router.push(`/member-profile?member_id=${member.user_id}`);\r\n            if (onCancel) {\r\n              onCancel();\r\n            }\r\n            return 0;\r\n          }\r\n          return prev - 1;\r\n        });\r\n      }, 1000);\r\n\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setIsSaving(false); // Only set to false on error\r\n    }\r\n    // Don't set isSaving to false on success to prevent UI flickering during redirect\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n      {/* User ID Field (read-only) */}\r\n      <div>\r\n        <label className=\"block text-gray-300 mb-2\">User ID</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"user_id\"\r\n          className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-gray-400\"\r\n          value={formData.user_id}\r\n          readOnly\r\n        />\r\n      </div>\r\n\r\n      {/* Name Field */}\r\n      <div>\r\n        <label className=\"block text-gray-300 mb-2\">Name</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-white\"\r\n          value={formData.name}\r\n          onChange={handleChange}\r\n        />\r\n      </div>\r\n\r\n      {/* Gender Field */}\r\n      <div>\r\n        <label className=\"block text-gray-300 mb-2\">Gender</label>\r\n        <select\r\n          name=\"gender\"\r\n          className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-white\"\r\n          value={formData.gender}\r\n          onChange={handleChange}\r\n        >\r\n          <option value=\"\">{formData.gender}</option>\r\n          <option value=\"male\">Male</option>\r\n          <option value=\"female\">Female</option>\r\n          <option value=\"other\">Other</option>\r\n        </select>\r\n      </div>\r\n\r\n      {/* Date Fields */}\r\n      {['date_of_birth', 'joining_date'].map((field) => (\r\n        <div key={field}>\r\n          <label className=\"block text-gray-300 mb-2\">\r\n            {field.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}\r\n          </label>\r\n          <input\r\n            type=\"date\"\r\n            name={field}\r\n            className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-white\"\r\n            value={formData[field]}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n      ))}\r\n\r\n      {/* Contact Fields */}\r\n      {['location', 'phone_no', 'whatsapp_no'].map((field) => (\r\n        <div key={field}>\r\n          <label className=\"block text-gray-300 mb-2\">\r\n            {field.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}\r\n          </label>\r\n          <input\r\n            type={field.includes('phone') ? 'tel' : 'text'}\r\n            name={field}\r\n            className=\"w-full p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-white\"\r\n            value={formData[field]}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n      ))}\r\n\r\n      {/* Error and Success Messages */}\r\n      {error && (\r\n        <div className=\"text-red-500 p-3 bg-red-500/10 rounded-lg\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      {saveSuccess && (\r\n        <div className=\"text-green-500 p-3 bg-green-500/10 rounded-lg\">\r\n          User data updated successfully! Redirecting...\r\n        </div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex flex-col sm:flex-row gap-4\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onCancel}\r\n          className=\"w-full border border-gray-500 text-white rounded-lg py-3 hover:bg-[#1a1a1a] transition\"\r\n          disabled={isSaving || saveSuccess}\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className={`w-full ${isSaving || saveSuccess ? 'bg-[#FFDD4A]/80' : 'bg-[#FFDD4A] hover:bg-[#ffd700]'} text-black font-bold py-3 rounded-lg transition`}\r\n          disabled={isSaving || saveSuccess}\r\n        >\r\n          {saveSuccess ? \"Redirecting...\" : isSaving ? \"Saving...\" : \"Update User Data\"}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 689, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/Inpage_header_3dot.jsx"],"sourcesContent":["// src\\components\\Inpage_header_3dot.jsx\r\n\"use client\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useState } from \"react\";\r\nimport { LuUndo2 } from \"react-icons/lu\";\r\nimport { SlOptionsVertical } from \"react-icons/sl\";\r\nimport { GrClose } from \"react-icons/gr\";\r\nimport RemarksForm from \"@/components/Remarks_form\";\r\nimport BlacklistForm from \"@/components/Blacklist_form\";\r\nimport EditUserData from \"@/components/edit_user_data\";\r\n\r\nexport default function Inpage_header({ title, member_id, member }) {\r\n  const router = useRouter();\r\n  const [showOptions, setShowOptions] = useState(false);\r\n  const [remarksShow, setRemarksShow] = useState(false);\r\n  const [blacklistShow, setBlacklistShow] = useState(false);\r\n  const [editUserDataShow, setEditUserDataShow] = useState(false);\r\n\r\n  const toggleOptions = () => setShowOptions(!showOptions);\r\n\r\n  const openAddMembership = () => {\r\n    setAddMembershipShow(true);\r\n    setRemarksShow(false);\r\n    setBlacklistShow(false);\r\n    setEditUserDataShow(false);\r\n    setShowOptions(false);\r\n  };\r\n\r\n  const openRemarks = () => {\r\n    setRemarksShow(true);\r\n    setAddMembershipShow(false);\r\n    setBlacklistShow(false);\r\n    setEditUserDataShow(false);\r\n    setShowOptions(false);\r\n  };\r\n\r\n  const openBlacklist = () => {\r\n    setBlacklistShow(true);\r\n    setAddMembershipShow(false);\r\n    setRemarksShow(false);\r\n    setEditUserDataShow(false);\r\n    setShowOptions(false);\r\n  };\r\n\r\n  const openEditUserData = () => {\r\n    setEditUserDataShow(true);\r\n    setAddMembershipShow(false);\r\n    setRemarksShow(false);\r\n    setBlacklistShow(false);\r\n    setShowOptions(false);\r\n  };\r\n\r\n  const closeAllModals = () => {\r\n    setAddMembershipShow(false);\r\n    setRemarksShow(false);\r\n    setBlacklistShow(false);\r\n    setEditUserDataShow(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative flex text-2xl md:text-4xl p-4 md:p-6 lg:p-10 justify-between items-center\">\r\n      <a href=\"\">\r\n        <LuUndo2 onClick={() => router.back()} className=\"text-[#FFDD4A]\" />\r\n      </a>\r\n      <h1 className=\"text-center w-full\">{title}</h1>\r\n      <button onClick={toggleOptions}>\r\n        <SlOptionsVertical className=\"text-[#ffffff]\" />\r\n      </button>\r\n\r\n      {showOptions && (\r\n        <div className=\"absolute top-full right-2 z-50 bg-[#0a0a0a] rounded-xl shadow-lg p-4 md:p-8 text-center md:w-1/2 border border-[#6e6e6e]\">\r\n          <div className=\"flex justify-between items-center mb-4 border-b pb-2\">\r\n            <h2 className=\"text-lg font-medium md:text-2xl\">Options</h2>\r\n            <GrClose\r\n              onClick={toggleOptions}\r\n              className=\"cursor-pointer hover:scale-90 transition-transform text-gray-400 hover:text-white\"\r\n              size={28}\r\n            />\r\n          </div>\r\n          <ul className=\"space-y-2 flex flex-col p-3 text-sm md:text-xl text-center\">\r\n            <button\r\n              onClick={openEditUserData}\r\n              className=\"bg-[#232024] p-3 rounded-2xl hover:border border-[#FFDD4A]\"\r\n            >\r\n              Edit Data\r\n            </button>\r\n            <button\r\n              onClick={openBlacklist}\r\n              className=\"bg-[#232024] p-3 rounded-2xl hover:border border-[#FFDD4A]\"\r\n            >\r\n              Blacklist\r\n            </button>\r\n            <button\r\n              onClick={openRemarks}\r\n              className=\"bg-[#232024] p-3 rounded-2xl hover:border border-[#FFDD4A]\"\r\n            >\r\n              Remarks\r\n            </button>\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* Remarks Form */}\r\n      {remarksShow && (\r\n        <div className=\"fixed inset-0 z-50 bg-[#0a0a0a]/80 flex justify-center items-center overflow-y-auto p-4\">\r\n          <div className=\"relative w-full max-w-2xl bg-[#0a0a0a] border border-[#6e6e6e] rounded-xl overflow-hidden flex flex-col max-h-[90vh]\">\r\n            <div className=\"sticky top-0 z-10 bg-[#0a0a0a] p-4 border-b border-[#6e6e6e] flex justify-end\">\r\n              <GrClose\r\n                onClick={closeAllModals}\r\n                className=\"cursor-pointer text-gray-400 hover:text-white hover:scale-90 transition-transform\"\r\n                size={28}\r\n              />\r\n            </div>\r\n            <div className=\"overflow-y-auto p-4 md:p-6 text-sm md:text-base\">\r\n              <RemarksForm user_id={member_id} onSave={closeAllModals} onCancel={closeAllModals} />\r\n            </div>\r\n            <div className=\"h-20\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Blacklist Form */}\r\n      {blacklistShow && (\r\n        <div className=\"fixed inset-0 z-50 bg-[#0a0a0a]/80 flex justify-center items-center overflow-y-auto p-4\">\r\n          <div className=\"relative w-full max-w-2xl bg-[#0a0a0a] border border-[#6e6e6e] rounded-xl overflow-hidden flex flex-col max-h-[90vh]\">\r\n            <div className=\"sticky top-0 z-10 bg-[#0a0a0a] p-4 border-b border-[#6e6e6e] flex justify-end\">\r\n              <GrClose\r\n                onClick={closeAllModals}\r\n                className=\"cursor-pointer text-gray-400 hover:text-white hover:scale-90 transition-transform\"\r\n                size={28}\r\n              />\r\n            </div>\r\n            <div className=\"overflow-y-auto p-4 md:p-6 text-sm md:text-base\">\r\n              <BlacklistForm\r\n                user_id={member_id}\r\n                onSave={(data) => {\r\n                  console.log(\"Blacklisted:\", data);\r\n                  closeAllModals();\r\n                }}\r\n                onCancel={closeAllModals}\r\n              />\r\n            </div>\r\n            <div className=\"h-20\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Edit User Data Form */}\r\n      {editUserDataShow && (\r\n        <div className=\"fixed inset-0 z-50 bg-[#0a0a0a]/80 flex justify-center items-center overflow-y-auto p-4\">\r\n          <div className=\"relative w-full max-w-2xl bg-[#0a0a0a] border border-[#6e6e6e] rounded-xl overflow-hidden flex flex-col max-h-[90vh]\">\r\n            <div className=\"sticky top-0 z-10 bg-[#0a0a0a] p-4 border-b border-[#6e6e6e] flex justify-end\">\r\n              <GrClose\r\n                onClick={closeAllModals}\r\n                className=\"cursor-pointer text-gray-400 hover:text-white hover:scale-90 transition-transform\"\r\n                size={28}\r\n              />\r\n            </div>\r\n            <div className=\"overflow-y-auto p-4 md:p-6 text-sm md:text-base\">\r\n              <EditUserData\r\n                member={member} // Pass member data\r\n                user_id={member_id}\r\n                onSave={(data) => {\r\n                  console.log(\"User Data Edited:\", data);\r\n                  closeAllModals();\r\n                }}\r\n                onCancel={closeAllModals}\r\n              />\r\n            </div>\r\n            <div className=\"h-20\" />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1062, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/Renew_form.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function RenewalFormSection({ user_id, membershipPlans}) {\r\n  console.log(membershipPlans)\r\n  const [formData, setFormData] = useState({\r\n    bill_no: '',\r\n    plan: '',\r\n    days:'',\r\n    amount: '',\r\n    totalAmount:'',\r\n    discount: '',\r\n    balance: 0,\r\n    transaction_type: '',\r\n    trainer_id: '',\r\n    expiry_date: ''\r\n  });\r\n  const [plans, setPlans] = useState([]);\r\n  const [trainers, setTrainers] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const router = useRouter();\r\n\r\n  // Fetch plans and trainers data\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const plansResponse = await fetch('/api/fetch_plans');\r\n        if (!plansResponse.ok) throw new Error('Failed to fetch plans');\r\n        const plansData = await plansResponse.json();\r\n        setPlans(plansData);\r\n\r\n        const trainersResponse = await fetch('/api/fetch_trainers');\r\n        if (!trainersResponse.ok) throw new Error('Failed to fetch trainers');\r\n        const trainersData = await trainersResponse.json();\r\n        setTrainers(trainersData);\r\n      } catch (err) {\r\n        setError(err.message);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  // Update amount, expiry_date, and balance when plan changes\r\n  useEffect(() => {\r\n    if (formData.plan) {\r\n      const selectedPlan = plans.find(plan => plan.name === formData.plan);\r\n      if (selectedPlan) {\r\n        const currentDate = new Date();\r\n        const expiryDate = new Date(currentDate);\r\n        const days = parseInt(formData.days) || parseInt(selectedPlan.duration);\r\n        expiryDate.setDate(expiryDate.getDate() + parseInt(selectedPlan.duration));\r\n        const expiryDateFormatted = expiryDate.toISOString().split('T')[0]; // Format as YYYY-MM-DD\r\n\r\n        setFormData(prev => {\r\n          const totalAmount = selectedPlan.amount;\r\n          const balance = 0;\r\n\r\n          return {\r\n            ...prev,\r\n            days: prev.days || selectedPlan.duration,\r\n            totalAmount,\r\n            expiry_date: expiryDateFormatted,\r\n            balance: balance.toFixed(2)\r\n          };\r\n        });\r\n      }\r\n    }\r\n  }, [formData.plan, plans]);\r\n\r\n  // Handle form changes\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => {\r\n      const newData = { ...prev, [name]: value };\r\n      const totalAmount = parseFloat(newData.totalAmount) || 0;\r\n      const discount = parseFloat(newData.discount) || 0;\r\n      const amount = parseFloat(newData.amount) || 0;\r\n      const days = parseInt(newData.days) || 0;\r\n\r\n      if (name === 'totalAmount' || name === 'amount' || name === 'discount' || name === 'days') {\r\n        newData.balance = Math.max(0, totalAmount - (amount + discount)).toFixed(2);\r\n        if (days > 0) {\r\n          const currentDate = new Date();\r\n          const expiryDate = new Date(currentDate);\r\n          expiryDate.setDate(expiryDate.getDate() + days);\r\n          newData.expiry_date = expiryDate.toISOString().split('T')[0];\r\n        } else {\r\n          newData.expiry_date = '';\r\n        }\r\n      }\r\n      return newData;\r\n    });\r\n  };\r\n\r\n    const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    try {\r\n      const currentDate = new Date();\r\n      const currentDateString = currentDate.toISOString().split('T')[0];\r\n\r\n      // Check if the selected plan exists in membershipPlans\r\n      const selectedPlan = membershipPlans.find(\r\n        (plan) => plan.plan_name === formData.plan\r\n      );\r\n\r\n      if (selectedPlan && selectedPlan.exp_date) {\r\n        const expiryDate = new Date(selectedPlan.exp_date);\r\n        if (expiryDate > currentDate) {\r\n          // Calculate remaining days\r\n          const timeDifference = expiryDate - currentDate;\r\n          const remainingDays = Math.ceil(timeDifference / (1000 * 60 * 60 * 24));\r\n          \r\n          setError(\r\n            `Sorry, the plan already exists and will expire on ${expiryDate.toLocaleDateString()} (${remainingDays} days remaining)`\r\n          );\r\n          return;\r\n        }\r\n      }\r\n\r\n      const dataToSubmit = {\r\n        user_id,\r\n        plan_name: formData.plan,\r\n        bill_no: formData.bill_no,\r\n        amount: formData.amount ? parseFloat(formData.amount) : null,\r\n        discount: formData.discount ? parseFloat(formData.discount) : null,\r\n        balance: formData.balance ? parseFloat(formData.balance) : null,\r\n        trans_type: formData.transaction_type,\r\n        trainer_id: formData.trainer_id,\r\n        date: currentDateString,\r\n        exp_date: formData.expiry_date\r\n      };\r\n\r\n      console.log(\"ðŸš€ Sending data to backend:\", dataToSubmit);\r\n\r\n      const response = await fetch('/api/renew-membership', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(dataToSubmit),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to submit renewal data');\r\n      }\r\n\r\n      const result = await response.json();\r\n      setSuccess('Renewal saved successfully!');\r\n      setFormData({\r\n        bill_no: '',\r\n        plan: '',\r\n        amount: '',\r\n        discount: '',\r\n        balance: 0,\r\n        transaction_type: '',\r\n        trainer_id: '',\r\n        expiry_date: ''\r\n      });\r\n      router.refresh();\r\n    } catch (err) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setFormData({\r\n      bill_no: '',\r\n      plan: '',\r\n      amount: '',\r\n      discount: '',\r\n      balance: 0,\r\n      transaction_type: '',\r\n      trainer_id: '',\r\n      expiry_date: ''\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-8 border-t pt-6 border-[#3E3A3D]\">\r\n      <h3 className=\"text-lg font-medium mb-4 text-gray-300\">Renew Membership</h3>\r\n      \r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n      {success && <p className=\"text-green-500 mb-4\">{success}</p>}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {/* Left Column */}\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"bill_no\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Bill No\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"bill_no\"\r\n                name=\"bill_no\"\r\n                value={formData.bill_no}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter bill number\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"renewal-plan\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Plan *\r\n              </label>\r\n              <select\r\n                id=\"renewal-plan\"\r\n                name=\"plan\"\r\n                value={formData.plan}\r\n                onChange={handleChange}\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D] appearance-none\"\r\n                required\r\n              >\r\n                <option value=\"\">Select Plan</option>\r\n                {plans.map((plan) => (\r\n                  <option key={plan.id} value={plan.name}>\r\n                    {plan.name} (â‚¹{plan.amount})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"renewal-days\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Enter the days *\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"days\"\r\n                name=\"days\"\r\n                value={formData.days}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter the days\"\r\n                min=\"0\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"renewal-totalAmount\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Total Amount *\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"totalAmount\"\r\n                name=\"totalAmount\"\r\n                value={formData.totalAmount}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter total amount\"\r\n                min=\"0\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"renewal-amount\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Amount (â‚¹) *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"renewal-amount\"\r\n                name=\"amount\"\r\n                value={formData.amount}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter amount\"\r\n                min=\"0\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {/* Right Column */}\r\n          <div className=\"space-y-4\">\r\n\r\n            <div>\r\n              <label htmlFor=\"renewal-discount\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Discount (â‚¹)\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"renewal-discount\"\r\n                name=\"discount\"\r\n                value={formData.discount}\r\n                onChange={handleChange}\r\n                placeholder=\"Enter discount\"\r\n                min=\"0\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"renewal-balance\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Balance (â‚¹)\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"renewal-balance\"\r\n                name=\"balance\"\r\n                value={formData.balance}\r\n                readOnly\r\n                className=\"p-4 w-full bg-[#2E2A2D] rounded-lg border border-[#3E3A3D] cursor-not-allowed\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"transaction_type\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Transaction Type\r\n              </label>\r\n              <select\r\n                id=\"transaction_type\"\r\n                name=\"transaction_type\"\r\n                value={formData.transaction_type}\r\n                onChange={handleChange}\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D] appearance-none\"\r\n              >\r\n                <option value=\"\">Select Type</option>\r\n                <option value=\"GPay\">GPay</option>\r\n                <option value=\"Cash\">Cash</option>\r\n                <option value=\"Credit Card\">Credit Card</option>\r\n                <option value=\"Bank Transfer\">Bank Transfer</option>\r\n                <option value=\"Other\">Other</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"trainer_name\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Trainer for the Member\r\n              </label>\r\n              <select\r\n                id=\"trainer_name\"\r\n                name=\"trainer_id\"\r\n                value={formData.trainer_id}\r\n                onChange={handleChange}\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D] appearance-none\"\r\n              >\r\n                <option value=\"\">Select Trainer</option>\r\n                {trainers.map((trainer) => (\r\n                  <option key={trainer.trainer_id} value={trainer.trainer_id}>\r\n                    {trainer.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"expiry_date\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Expiry Date\r\n              </label>\r\n              <input\r\n                type=\"date\"\r\n                id=\"expiry_date\"\r\n                name=\"expiry_date\"\r\n                value={formData.expiry_date}\r\n                readOnly\r\n                className=\"p-4 w-full bg-[#2E2A2D] rounded-lg border border-[#3E3A3D] cursor-not-allowed\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex justify-end gap-4 mt-8\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleCancel}\r\n            className=\"px-6 py-2.5 border border-[#3E3A3D] rounded-lg text-gray-300 hover:bg-[#2E2A2D] transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button \r\n            type=\"submit\"\r\n            className=\"px-6 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Save Renewal\r\n          </button>\r\n        </div>\r\n      </form>\r\n      <div className='h-20 xl:h-10'>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1758, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/Balance_form.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\n\r\nexport default function Balance_form({ user_id, membershipPlans }) {\r\n  const [selectedPlan, setSelectedPlan] = useState(membershipPlans[0]?.plan_name || '');\r\n  const [newAmountReceived, setNewAmountReceived] = useState(0);\r\n  const [formData, setFormData] = useState({\r\n    amountPaid: membershipPlans[0]?.amount || 0,\r\n    discount: membershipPlans[0]?.discount || 0,\r\n    bill_no: membershipPlans[0]?.bill_no || '',\r\n    trainer: membershipPlans[0]?.trainer || '',\r\n  });\r\n\r\n  // console.log(\"formData\", formData)\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [message, setMessage] = useState({ text: '', type: '' });\r\n  const [trainers, setTrainers] = useState([]);\r\n\r\n  const selectedPlanData = membershipPlans.find(p => p.plan_name === selectedPlan) || {};\r\n  const totalPlanAmount = (selectedPlanData.amount || 0) + (selectedPlanData.discount || 0) + (selectedPlanData.balance || 0);\r\n\r\n  const balance = Math.max(0, totalPlanAmount - (formData.amountPaid || 0) - (formData.discount || 0) - (newAmountReceived || 0));\r\n  \r\n  const totalAmountReceived = (formData.amountPaid || 0) + (newAmountReceived || 0);\r\n\r\n  // Fetch trainers from API\r\n  useEffect(() => {\r\n    const fetchTrainers = async () => {\r\n      try {\r\n        const response = await fetch('/api/fetch_trainers', {\r\n          method: 'GET',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n        if (response.ok) {\r\n          const data = await response.json();\r\n          setTrainers(data); // Expecting array of { trainer_id, name }\r\n          console.log(\"Fetched trainers:\", data);\r\n        } else {\r\n          throw new Error('Failed to fetch trainers');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching trainers:', error);\r\n        setMessage({ text: 'Failed to load trainers. Please try again.', type: 'error' });\r\n      }\r\n    };\r\n    fetchTrainers();\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const plan = membershipPlans.find(p => p.plan_name === selectedPlan) || membershipPlans[0] || {};\r\n    setFormData({\r\n      amountPaid: plan.amount || 0,\r\n      discount: plan.discount || 0,\r\n      bill_no: plan.bill_no || '',\r\n      trainer: plan.trainer || '',\r\n    });\r\n    setNewAmountReceived(0);\r\n    setMessage({ text: '', type: '' });\r\n  }, [selectedPlan, membershipPlans]);\r\n\r\n  const handlePlanChange = (e) => {\r\n    setSelectedPlan(e.target.value);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const numValue = name === 'bill_no' || name === 'trainer' ? value : parseFloat(value) || 0;\r\n\r\n    if (name === 'newAmountReceived') {\r\n      setNewAmountReceived(numValue);\r\n    } else {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        [name]: numValue\r\n      }));\r\n    }\r\n    setMessage({ text: '', type: '' });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n    setMessage({ text: '', type: '' });\r\n\r\n    try {\r\n      const response = await fetch('/api/edit_amount', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          user_id,\r\n          selectedPlan,\r\n          bill_no: formData.bill_no,\r\n          totalAmountReceived,\r\n          discount: formData.discount,\r\n          balance, \r\n          trainer: formData.trainer,\r\n        }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        console.log('Form submitted:', { \r\n          selectedPlan, \r\n          bill_no: formData.bill_no,\r\n          trainer: formData.trainer,\r\n          ...formData, \r\n          newAmountReceived,\r\n          totalAmountReceived,\r\n          balance\r\n        });\r\n        setMessage({ text: 'Balance updated successfully!', type: 'success' });\r\n        setTimeout(() => {\r\n          window.location.href = `/member-profile?member_id=${user_id}`;\r\n        }, 1000);\r\n      } else {\r\n        throw new Error('Failed to update balance');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error submitting form:', error);\r\n      setMessage({ text: 'Failed to update balance. Please try again.', type: 'error' });\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    const plan = membershipPlans.find(p => p.plan_name === selectedPlan) || membershipPlans[0] || {};\r\n    setFormData({\r\n      amountPaid: plan.amount || 0,\r\n      discount: plan.discount || 0,\r\n      bill_no: plan.bill_no || '',\r\n    });\r\n    setNewAmountReceived(0);\r\n    setMessage({ text: '', type: '' });\r\n  };\r\n\r\n  const handleWriteOff = () => {\r\n    console.log('Write off initiated for balance:', balance);\r\n    setMessage({ text: 'Write off logged to console', type: 'success' });\r\n  };\r\n\r\n  // Validate membershipPlans\r\n  if (!membershipPlans || membershipPlans.length === 0) {\r\n    return <div className=\"p-4 sm:p-6 text-gray-300\">No membership plans available.</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6 border-t border-[#3E3A3D]\">\r\n      <h2 className=\"text-lg sm:text-xl font-semibold mb-4 sm:mb-6 text-gray-300\">Edit Balance</h2>\r\n      \r\n      {message.text && (\r\n        <div className={`mb-4 p-3 rounded-lg text-sm sm:text-base ${\r\n          message.type === 'success' ? 'bg-green-600 text-white' : 'bg-red-600 text-white'\r\n        }`}>\r\n          {message.text}\r\n        </div>\r\n      )}\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <label className=\"block text-sm font-medium mb-1 text-gray-400\">\r\n            Select the plan\r\n          </label>\r\n          <select \r\n            value={selectedPlan}\r\n            onChange={handlePlanChange}\r\n            className=\"w-full p-2 sm:p-3 bg-[#2E2A2D] border border-[#3E3A3D] rounded-lg text-sm sm:text-base\"\r\n          >\r\n            {membershipPlans.map((plan) => (\r\n              <option key={plan.plan_name} value={plan.plan_name}>\r\n                {plan.plan_name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <label htmlFor=\"bill_no\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n            Bill Number\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"bill_no\"\r\n            name=\"bill_no\"\r\n            value={formData.bill_no}\r\n            onChange={handleChange}\r\n            placeholder=\"Enter bill number\"\r\n            className=\"w-full p-2 sm:p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-sm sm:text-base\"\r\n            readOnly\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <label className=\"block text-sm font-medium mb-1 text-gray-400\">\r\n            Select the trainer\r\n          </label>\r\n          <select \r\n            name=\"trainer\"\r\n            value={formData.trainer || ''} // Bind to formData.trainer to reflect the selected plan's trainer\r\n            onChange={handleChange}\r\n            className=\"w-full p-2 sm:p-3 bg-[#2E2A2D] border border-[#3E3A3D] rounded-lg text-sm sm:text-base\"\r\n          >\r\n            {/*{membershipPlans.map((plan, index) => (\r\n              <option key={`plan-${index}-${plan.trainer}`} value={plan.trainer}>\r\n                {plan.trainer} ({plan.plan_name}) \r\n              </option>\r\n            ))}*/}\r\n\r\n            {trainers.map((trainer, index) => (\r\n              <option key={`trainer-${index}-${trainer.trainer_id}`} value={trainer.trainer_id}>\r\n                {trainer.trainer_id} - {trainer.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <label htmlFor=\"amountPaid\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n            Amount Already Received (â‚¹) *\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"amountPaid\"\r\n            name=\"amountPaid\"\r\n            value={formData.amountPaid}\r\n            onChange={handleChange}\r\n            placeholder=\"Enter amount paid\"\r\n            className=\"w-full p-2 sm:p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-sm sm:text-base\"\r\n            required\r\n            readOnly\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <label className=\"block text-sm font-medium mb-1 text-gray-400\">\r\n            Total Amount Received (â‚¹)\r\n          </label>\r\n          <input\r\n            value={totalAmountReceived}\r\n            readOnly\r\n            className=\"w-full p-2 sm:p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-sm sm:text-base text-gray-400\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <label htmlFor=\"discount\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n            Discount (â‚¹)\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"discount\"\r\n            name=\"discount\"\r\n            placeholder=\"Enter discount\"\r\n            value={formData.discount}\r\n            onChange={handleChange}\r\n            className=\"w-full p-2 sm:p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-sm sm:text-base\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-4 sm:mb-6\">\r\n          <label className=\"block text-sm font-medium mb-1 text-gray-400\">\r\n            Balance Amount (â‚¹)\r\n          </label>\r\n          <input\r\n            value={balance}\r\n            readOnly\r\n            className=\"w-full p-2 sm:p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-sm sm:text-base text-gray-400\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"mb-3 sm:mb-4\">\r\n          <label htmlFor=\"newAmountReceived\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n            New Amount Received (â‚¹)\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            id=\"newAmountReceived\"\r\n            name=\"newAmountReceived\"\r\n            value={newAmountReceived}\r\n            onChange={handleChange}\r\n            placeholder=\"Enter new amount received\"\r\n            className=\"w-full p-2 sm:p-3 bg-[#232024] border border-[#3E3A3D] rounded-lg text-sm sm:text-base\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"flex flex-col sm:flex-row justify-between gap-3\">\r\n          <div className=\"order-2 sm:order-1 flex justify-center sm:justify-start\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleWriteOff}\r\n              className=\"w-full sm:w-auto px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm\"\r\n            >\r\n              Write Off\r\n            </button>\r\n          </div>\r\n          \r\n          <div className=\"order-1 sm:order-2 flex flex-col sm:flex-row gap-2 sm:gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"w-full sm:w-auto px-4 py-2 border border-[#3E3A3D] rounded-lg text-gray-300 hover:bg-[#2E2A2D] transition-colors text-sm sm:text-base\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              className={`w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm sm:text-base ${\r\n                isSubmitting ? 'opacity-50 cursor-not-allowed' : ''\r\n              }`}\r\n            >\r\n              {isSubmitting ? 'Saving...' : 'Save Changes'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <div className='h-20 xl:h-10'></div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2305, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/memberlist_profile.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect, useMemo } from \"react\";\r\nimport { FaRegCheckCircle } from \"react-icons/fa\";\r\nimport Renew_form from \"./Renew_form\";\r\nimport { GrClose } from \"react-icons/gr\";\r\nimport BalanceEditForm from \"./Balance_form\";\r\n\r\nexport default function MemberlistProfile({ member }) {\r\n  const [renewBox, setRenewBox] = useState(false);\r\n  const [balanceBox, setBalanceBox] = useState(false);\r\n  const [membershipPlans, setMembershipPlans] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // console.log(\"membershipPlans\", membershipPlans);\r\n\r\n  const toggleRenewBox = () => {\r\n    setRenewBox(!renewBox);\r\n    if (balanceBox) setBalanceBox(false);\r\n  };\r\n\r\n  const toggleBalanceBox = () => {\r\n    setBalanceBox(!balanceBox);\r\n    if (renewBox) setRenewBox(false);\r\n  };\r\n\r\n  // Fetch membership plans\r\n  useEffect(() => {\r\n    const fetchMembershipPlans = async () => {\r\n      try {\r\n        const response = await fetch('/api/fetch_membership_plans');\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch membership plans');\r\n        }\r\n        const result = await response.json();\r\n        // console.log(\"fetched data\", result);\r\n        \r\n        if (result.success && result.data) {\r\n          const userPlans = result.data.filter(plan => plan.user_id === member.user_id);\r\n          // console.log(\"filtered user plans\", userPlans);\r\n          setMembershipPlans(userPlans);\r\n        } else {\r\n          console.error('API returned unsuccessful response:', result);\r\n          setMembershipPlans([]);\r\n        }\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Error fetching membership plans:', error);\r\n        setMembershipPlans([]);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchMembershipPlans();\r\n  }, [member.user_id]);\r\n\r\n  // Get plan names - using useMemo to optimize\r\n  const planNames = useMemo(() => {\r\n    return membershipPlans.length > 0 \r\n      ? membershipPlans.map(plan => plan.plan_name).join(', ')\r\n      : 'Basic Gym';\r\n  }, [membershipPlans]);\r\n\r\n  // Calculate expiration details for each plan using useMemo\r\n  const planExpirations = useMemo(() => {\r\n    if (membershipPlans.length > 0) {\r\n      return membershipPlans.map(plan => {\r\n        const expiryDate = new Date(plan.exp_date);\r\n        const today = new Date();\r\n        \r\n        // Calculate days until expiry\r\n        const daysUntilExpiry = Math.max(\r\n          0,\r\n          Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24))\r\n        );\r\n        \r\n        // Format expiry date\r\n        const formattedExpiry = expiryDate.toLocaleDateString('en-GB', {\r\n          day: '2-digit',\r\n          month: '2-digit',\r\n          year: 'numeric',\r\n        }).split('/').join('-');\r\n\r\n        return {\r\n          planName: plan.plan_name,\r\n          daysUntilExpiry,\r\n          formattedExpiry,\r\n          isExpired: expiryDate < today\r\n        };\r\n      });\r\n    } else if (!loading) {\r\n      // Fallback for when no plans are found\r\n      const joiningDate = new Date(member.joining_date);\r\n      const expiryDate = new Date(joiningDate);\r\n      expiryDate.setFullYear(joiningDate.getFullYear() + 1);\r\n      const today = new Date();\r\n      \r\n      const daysUntilExpiry = Math.max(\r\n        0,\r\n        Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24))\r\n      );\r\n      \r\n      const formattedExpiry = expiryDate.toLocaleDateString('en-GB', {\r\n        day: '2-digit',\r\n        month: '2-digit',\r\n        year: 'numeric',\r\n      }).split('/').join('-');\r\n\r\n      return [{\r\n        planName: 'Basic Gym',\r\n        daysUntilExpiry,\r\n        formattedExpiry,\r\n        isExpired: expiryDate < today\r\n      }];\r\n    }\r\n    return [];\r\n  }, [membershipPlans, member.joining_date, loading]);\r\n\r\n  // Determine overall expiration status and count expired plans for the button\r\n  const { daysUntilExpiry, isExpired, formattedExpiry, expiredPlansCount } = useMemo(() => {\r\n    if (planExpirations.length > 0) {\r\n      // Count expired plans that are less than 60 days old\r\n      const expiredPlansCount = planExpirations.filter(plan => {\r\n        if (!plan.isExpired) return false;\r\n        \r\n        const expiryDate = new Date(plan.formattedExpiry.split('-').reverse().join('-'));\r\n        const currentDate = new Date();\r\n        const diffTime = currentDate - expiryDate;\r\n        const diffDays = diffTime / (1000 * 60 * 60 * 24);\r\n        \r\n        return diffDays < 60;\r\n      }).length;\r\n      \r\n      const latestPlan = planExpirations.reduce((latest, plan) => {\r\n        const planDate = new Date(plan.formattedExpiry.split('-').reverse().join('-'));\r\n        return !latest || planDate > new Date(latest.formattedExpiry.split('-').reverse().join('-')) ? plan : latest;\r\n      }, null);\r\n      \r\n      return {\r\n        daysUntilExpiry: latestPlan.daysUntilExpiry,\r\n        isExpired: expiredPlansCount > 0,\r\n        formattedExpiry: latestPlan.formattedExpiry,\r\n        expiredPlansCount\r\n      };\r\n    }\r\n    return { daysUntilExpiry: 0, isExpired: true, formattedExpiry: 'N/A', expiredPlansCount: 1 };\r\n  }, [planExpirations]);\r\n\r\n    // console.log(\"formattedExpiry\",formattedExpiry);\r\n    // console.log(\"expiredPlansCount\",expiredPlansCount);\r\n\r\n  return (\r\n    <div className=\"relative grid grid-cols-1 md:grid-cols-2 p-4 md:p-6 lg:p-10 gap-4 md:gap-10\">\r\n      {/* Profile Image Section */}\r\n      <div className=\"relative\">\r\n        <img\r\n          loading=\"lazy\"\r\n          className=\"object-cover w-full h-full rounded-lg aspect-[3/4] md:max-h-80 lg:max-h-150\"\r\n          src={member.user_id ? `/images/user_pic/${member.user_id}.png` : \"/images/user1.jpg\"}\r\n          alt=\"User profile\"\r\n        />\r\n        <div className=\"absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/95 via-black/60 to-transparent\">\r\n          <p className=\"text-white font-medium text-sm md:text-lg\">#{member.user_id}</p>\r\n          <p className=\"text-white font-bold text-lg md:text-2xl\">{member.name}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Action Buttons Section */}\r\n      <div className=\"flex flex-col text-center justify-center gap-4 md:gap-6 lg:gap-8\">\r\n        {/* Paid Button */}\r\n        <div className=\"relative\">\r\n          <button\r\n            onClick={toggleBalanceBox}\r\n            className={`w-full ${isExpired ? 'bg-red-500' : 'bg-[#71CA35]'} flex gap-2 justify-center items-center rounded-lg text-black font-semibold px-4 py-2 text-xl md:text-3xl md:py-4`}\r\n          >\r\n            {isExpired ? `${expiredPlansCount} Plan${expiredPlansCount > 1 ? 's' : ''} Expired` : 'Not Expired'} <FaRegCheckCircle />\r\n          </button>\r\n          \r\n          {/* Balance Form Modal */}\r\n          {balanceBox && (\r\n            <div className=\"absolute top-full left-0 right-0 z-50 mt-4 bg-[#0a0a0a] rounded-xl shadow-lg p-4 md:p-8 text-center border border-[#6e6e6e]\">\r\n              <div className=\"flex justify-end items-center mb-4 pb-2 border-b border-[#6e6e6e]\">\r\n                <GrClose\r\n                  onClick={toggleBalanceBox}\r\n                  className=\"cursor-pointer hover:scale-90 transition-transform text-gray-400 hover:text-white\"\r\n                  size={28}\r\n                />\r\n              </div>\r\n              {/* <Balance_form /> */}\r\n              <BalanceEditForm user_id={member.user_id} membershipPlans={membershipPlans} />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Membership Info */}\r\n        <div className=\"bg-[#FFDD4A] text-black px-4 py-2 rounded-lg gap-2 flex flex-col items-center md:py-4\">\r\n          {loading ? (\r\n            <h3 className=\"text-xl font-semibold md:text-2xl\">Loading...</h3>\r\n          ) : (\r\n            planExpirations.filter(plan => !plan.isExpired && plan.daysUntilExpiry <= 60).length > 0 ? (\r\n              planExpirations\r\n                .filter(plan => !plan.isExpired && plan.daysUntilExpiry <= 60)\r\n                .map((plan, index) => (\r\n                  <p key={index} className=\"text-sm md:text-lg font-semibold\">\r\n                    {plan.planName} - {plan.daysUntilExpiry} Days Remaining, Expires {plan.formattedExpiry}\r\n                  </p>\r\n                ))\r\n            ) : (\r\n              <p className=\"text-sm md:text-lg font-semibold\">\r\n                No plans\r\n              </p>\r\n            )\r\n          )}\r\n        </div>\r\n\r\n        {/* Renew Button */}\r\n        <div className=\"relative\">\r\n          <button\r\n            onClick={toggleRenewBox}\r\n            className=\"w-full bg-[#2B2E32] px-4 py-2 font-semibold rounded-lg text-[#FFDD4A] border-2 border-[#FFDD4A] md:py-4 md:text-2xl\"\r\n          >\r\n            Renew\r\n          </button>\r\n          \r\n          {/* Renew Form Modal */}\r\n          {renewBox && (\r\n            <div className=\"absolute top-full left-0 right-0 z-50 mt-4 bg-[#0a0a0a] rounded-xl shadow-lg p-4 md:p-8 text-center border border-[#6e6e6e]\">\r\n              <div className=\"flex justify-end items-center mb-4 pb-2 border-b border-[#6e6e6e]\">\r\n                <GrClose\r\n                  onClick={toggleRenewBox}\r\n                  className=\"cursor-pointer hover:scale-90 transition-transform text-gray-400 hover:text-white\"\r\n                  size={28}\r\n                />\r\n              </div>\r\n              <Renew_form user_id={member.user_id} membershipPlans={membershipPlans}/>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2698, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/Members_profile2.jsx"],"sourcesContent":["// src\\components\\Members_profile2.jsx\r\n\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { FaLocationDot } from \"react-icons/fa6\";\r\nimport { SiWhatsapp } from \"react-icons/si\";\r\nimport { FaPhoneAlt } from \"react-icons/fa\";\r\nimport { BsWhatsapp } from \"react-icons/bs\";\r\nimport { FaWeightHanging } from \"react-icons/fa6\";\r\n\r\nexport default function Members_profile2({ member }) {\r\n  \r\n  // console.log(member);\r\n\r\n  // Format joining date\r\n  const formattedJoiningDate = new Date(member.joining_date).toLocaleDateString('en-GB', {\r\n    day: '2-digit',\r\n    month: '2-digit',\r\n    year: 'numeric',\r\n  }).split('/').join('-');\r\n\r\n  // State for remark and blacklist status\r\n  const [remark, setRemark] = useState('No Remarks');\r\n  const [blacklistStatus, setBlacklistStatus] = useState('Not Black-listed');\r\n\r\n  // Fetch remark and blacklist data\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await fetch('/api/fetch_remark_blcklist');\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch data');\r\n        }\r\n        const data = await response.json();\r\n        // Find the data for the current member\r\n        const memberData = data.find(item => item.userId === member.user_id);\r\n        if (memberData) {\r\n          setRemark(memberData.remark || 'No Remarks');\r\n          setBlacklistStatus(memberData.blacklistDescription ? 'Black-listed' : 'Not Black-listed');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching remark and blacklist data:', error);\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [member.user_id]);\r\n\r\n  return (\r\n    <div className='p-4 md:p-6 lg:p-10'>\r\n        <div className=\"mb-5 md:mb-10 text-sm md:text-lg\">\r\n          <p className={remark === 'No Remarks' ? 'text-white' : 'text-yellow-600'}>Note: {remark}</p>\r\n          <p className={blacklistStatus === 'Black-listed' ? 'text-red-600' : 'text-green-600'}>\r\n            Blacklist Status: {blacklistStatus}\r\n          </p>\r\n        </div>\r\n        <div className='grid grid-cols-2 gap-4 md:gap-8 md:text-2xl'>\r\n          <h2 className=\"flex gap-2 items-center\"><span className=\"text-[#FFDD4A] font-semibold\">J.D</span> {formattedJoiningDate}</h2>\r\n          <h2 className=\"flex gap-2 items-center\"><FaWeightHanging className=\"text-[#FFDD4A]\"/> {member.weight}</h2>\r\n          <h2 className=\"flex gap-2 items-center\"><FaLocationDot className=\"text-[#FFDD4A]\"/> {member.location}</h2>\r\n          <h2 className=\"flex gap-2 items-center\"><span className=\"text-[#FFDD4A] font-semibold\"> Description </span>{member.about}</h2>\r\n          <h2 className=\"flex gap-2 items-center\"><SiWhatsapp className=\"text-[#FFDD4A]\"/> {member.whatsapp_no}</h2>\r\n          <h2 className=\"flex gap-2 items-center\"><FaPhoneAlt className=\"text-[#FFDD4A]\"/> {member.phone_no}</h2>\r\n          \r\n        </div>\r\n        <div className='grid grid-cols-2 gap-4 md:gap-8 lg:gap-12 md:text-2xl mt-10 md:mt-15'>\r\n            <a\r\n              className=\"bg-[#2B2E32] px-4 py-3 md:py-6 rounded-lg text-center flex items-center gap-2 justify-center\"\r\n              href={`https://wa.me/${member.whatsapp_no}`}\r\n            >\r\n              WhatsApp <BsWhatsapp />\r\n            </a>\r\n            <a\r\n              className=\"bg-[#2B2E32] px-4 py-3 md:py-6 rounded-lg text-center flex items-center gap-2 justify-center\"\r\n              href={`tel:${member.phone_no}`}\r\n            >\r\n              Call <FaPhoneAlt />\r\n            </a>\r\n        </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,sCAAsC;;;;;AAEtC;AACA;AACA;AACA;AACA;;;AALA;;;;;;;AAQe,SAAS,iBAAiB,EAAE,MAAM,EAAE;;IAEjD,uBAAuB;IAEvB,sBAAsB;IACtB,MAAM,uBAAuB,IAAI,KAAK,OAAO,YAAY,EAAE,kBAAkB,CAAC,SAAS;QACrF,KAAK;QACL,OAAO;QACP,MAAM;IACR,GAAG,KAAK,CAAC,KAAK,IAAI,CAAC;IAEnB,wCAAwC;IACxC,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,kCAAkC;IAClC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;sCAAE;YACR,MAAM;wDAAY;oBAChB,IAAI;wBACF,MAAM,WAAW,MAAM,MAAM;wBAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;4BAChB,MAAM,IAAI,MAAM;wBAClB;wBACA,MAAM,OAAO,MAAM,SAAS,IAAI;wBAChC,uCAAuC;wBACvC,MAAM,aAAa,KAAK,IAAI;+EAAC,CAAA,OAAQ,KAAK,MAAM,KAAK,OAAO,OAAO;;wBACnE,IAAI,YAAY;4BACd,UAAU,WAAW,MAAM,IAAI;4BAC/B,mBAAmB,WAAW,oBAAoB,GAAG,iBAAiB;wBACxE;oBACF,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,6CAA6C;oBAC7D;gBACF;;YACA;QACF;qCAAG;QAAC,OAAO,OAAO;KAAC;IAEnB,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAW,WAAW,eAAe,eAAe;;4BAAmB;4BAAO;;;;;;;kCACjF,6LAAC;wBAAE,WAAW,oBAAoB,iBAAiB,iBAAiB;;4BAAkB;4BACjE;;;;;;;;;;;;;0BAGvB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;;0CAA0B,6LAAC;gCAAK,WAAU;0CAA+B;;;;;;4BAAU;4BAAE;;;;;;;kCACnG,6LAAC;wBAAG,WAAU;;0CAA0B,6LAAC,kJAAA,CAAA,kBAAe;gCAAC,WAAU;;;;;;4BAAkB;4BAAE,OAAO,MAAM;;;;;;;kCACpG,6LAAC;wBAAG,WAAU;;0CAA0B,6LAAC,kJAAA,CAAA,gBAAa;gCAAC,WAAU;;;;;;4BAAkB;4BAAE,OAAO,QAAQ;;;;;;;kCACpG,6LAAC;wBAAG,WAAU;;0CAA0B,6LAAC;gCAAK,WAAU;0CAA+B;;;;;;4BAAqB,OAAO,KAAK;;;;;;;kCACxH,6LAAC;wBAAG,WAAU;;0CAA0B,6LAAC,iJAAA,CAAA,aAAU;gCAAC,WAAU;;;;;;4BAAkB;4BAAE,OAAO,WAAW;;;;;;;kCACpG,6LAAC;wBAAG,WAAU;;0CAA0B,6LAAC,iJAAA,CAAA,aAAU;gCAAC,WAAU;;;;;;4BAAkB;4BAAE,OAAO,QAAQ;;;;;;;;;;;;;0BAGnG,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBACC,WAAU;wBACV,MAAM,CAAC,cAAc,EAAE,OAAO,WAAW,EAAE;;4BAC5C;0CACU,6LAAC,iJAAA,CAAA,aAAU;;;;;;;;;;;kCAEtB,6LAAC;wBACC,WAAU;wBACV,MAAM,CAAC,IAAI,EAAE,OAAO,QAAQ,EAAE;;4BAC/B;0CACM,6LAAC,iJAAA,CAAA,aAAU;;;;;;;;;;;;;;;;;;;;;;;AAK9B;GAtEwB;KAAA","debugId":null}},
    {"offset": {"line": 2971, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/Recent_transations.jsx"],"sourcesContent":["\"use client\";\r\nimport { useState, useEffect } from 'react';\r\nimport { FaArrowRight } from \"react-icons/fa\";\r\nimport { FaGooglePay } from \"react-icons/fa\";\r\nimport { FaPiggyBank } from \"react-icons/fa\";\r\nimport { HiOutlineCash } from \"react-icons/hi\";\r\nimport { CiCreditCard1 } from \"react-icons/ci\";\r\n\r\nexport default function Recent_transations({ userId }) {\r\n  const [transactions, setTransactions] = useState([]);\r\n\r\n  useEffect(() => {\r\n    console.log('userId:', userId); // Debug userId\r\n    const fetchTransactions = async () => {\r\n      try {\r\n        const response = await fetch('/api/fetch_membership_plans');\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! status: ${response.status}`);\r\n        }\r\n        const { success, data, error } = await response.json();\r\n        if (!success) {\r\n          throw new Error(error || 'API request failed');\r\n        }\r\n        const filteredTransactions = data\r\n          .filter(transaction => transaction.user_id == userId) // Use == for type coercion\r\n          .map(transaction => {\r\n            console.log('Transaction date:', transaction.date); // Debug date\r\n            return transaction;\r\n          })\r\n          .sort((a, b) => new Date(b.date) - new Date(a.date))\r\n          .slice(0, 3);\r\n        setTransactions(filteredTransactions);\r\n      } catch (error) {\r\n        console.error('Error fetching transactions:', error);\r\n        setTransactions([]);\r\n      }\r\n    };\r\n\r\n    if (userId) {\r\n      fetchTransactions();\r\n    }\r\n  }, [userId]);\r\n\r\n  // Function to render the appropriate icon based on trans_type\r\n  const getTransactionIcon = (transType) => {\r\n    switch (transType) {\r\n      case 'GPay':\r\n        return <FaGooglePay className=\"size-8 md:size-12\" />;\r\n      case 'Cash':\r\n        return <HiOutlineCash className=\"size-8 md:size-12\" />;\r\n      case 'Credit Card':\r\n        return <CiCreditCard1 className=\"size-8 md:size-12\" />;\r\n      case 'Bank Transfer':\r\n        return <FaPiggyBank className=\"size-8 md:size-12\" />;\r\n      case 'Other':\r\n        return <span className=\"text-lg md:text-xl\">Other</span>;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"box\">\r\n      <div className=\"flex justify-between items-center text-lg md:text-xl font-semibold lg:text-2xl\">\r\n        <h2>Recent Transactions</h2>\r\n        <a href={`/transations?userId=${userId}`}><FaArrowRight /></a>\r\n      </div>\r\n\r\n      {transactions.map((transaction, index) => (\r\n        <div\r\n          key={index}\r\n          className=\"flex justify-between items-center bg-[#181818] px-4 py-2 rounded-lg my-5 md:px-8 md:py-4\"\r\n        >\r\n          <div className=\"flex gap-2 items-center md:gap-5\">\r\n            {getTransactionIcon(transaction.trans_type)}\r\n            <div className=\"md:text-xl ml-2\">\r\n              <h2>{transaction.plan_name}</h2>\r\n              <p>{new Date(transaction.date).toLocaleDateString()}</p>\r\n            </div>\r\n          </div>\r\n          <p className=\"text-lg text-[#71CA35] md:text-xl\">{transaction.amount}</p>\r\n          <p className=\"text-lg text-[#B30000] md:text-xl\">{transaction.balance}</p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AACA;AACA;AAGA;AACA;;;AANA;;;;;;;AAQe,SAAS,mBAAmB,EAAE,MAAM,EAAE;;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAEnD,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;wCAAE;YACR,QAAQ,GAAG,CAAC,WAAW,SAAS,eAAe;YAC/C,MAAM;kEAAoB;oBACxB,IAAI;wBACF,MAAM,WAAW,MAAM,MAAM;wBAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;4BAChB,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;wBAC1D;wBACA,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI;wBACpD,IAAI,CAAC,SAAS;4BACZ,MAAM,IAAI,MAAM,SAAS;wBAC3B;wBACA,MAAM,uBAAuB,KAC1B,MAAM;mGAAC,CAAA,cAAe,YAAY,OAAO,IAAI;kGAAQ,2BAA2B;yBAChF,GAAG;mGAAC,CAAA;gCACH,QAAQ,GAAG,CAAC,qBAAqB,YAAY,IAAI,GAAG,aAAa;gCACjE,OAAO;4BACT;kGACC,IAAI;mGAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,IAAI,IAAI,IAAI,KAAK,EAAE,IAAI;kGACjD,KAAK,CAAC,GAAG;wBACZ,gBAAgB;oBAClB,EAAE,OAAO,OAAO;wBACd,QAAQ,KAAK,CAAC,gCAAgC;wBAC9C,gBAAgB,EAAE;oBACpB;gBACF;;YAEA,IAAI,QAAQ;gBACV;YACF;QACF;uCAAG;QAAC;KAAO;IAEX,8DAA8D;IAC9D,MAAM,qBAAqB,CAAC;QAC1B,OAAQ;YACN,KAAK;gBACH,qBAAO,6LAAC,iJAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;YAChC,KAAK;gBACH,qBAAO,6LAAC,iJAAA,CAAA,gBAAa;oBAAC,WAAU;;;;;;YAClC,KAAK;gBACH,qBAAO,6LAAC,iJAAA,CAAA,gBAAa;oBAAC,WAAU;;;;;;YAClC,KAAK;gBACH,qBAAO,6LAAC,iJAAA,CAAA,cAAW;oBAAC,WAAU;;;;;;YAChC,KAAK;gBACH,qBAAO,6LAAC;oBAAK,WAAU;8BAAqB;;;;;;YAC9C;gBACE,OAAO;QACX;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAG;;;;;;kCACJ,6LAAC;wBAAE,MAAM,CAAC,oBAAoB,EAAE,QAAQ;kCAAE,cAAA,6LAAC,iJAAA,CAAA,eAAY;;;;;;;;;;;;;;;;YAGxD,aAAa,GAAG,CAAC,CAAC,aAAa,sBAC9B,6LAAC;oBAEC,WAAU;;sCAEV,6LAAC;4BAAI,WAAU;;gCACZ,mBAAmB,YAAY,UAAU;8CAC1C,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;sDAAI,YAAY,SAAS;;;;;;sDAC1B,6LAAC;sDAAG,IAAI,KAAK,YAAY,IAAI,EAAE,kBAAkB;;;;;;;;;;;;;;;;;;sCAGrD,6LAAC;4BAAE,WAAU;sCAAqC,YAAY,MAAM;;;;;;sCACpE,6LAAC;4BAAE,WAAU;sCAAqC,YAAY,OAAO;;;;;;;mBAXhE;;;;;;;;;;;AAgBf;GA9EwB;KAAA","debugId":null}}]
}