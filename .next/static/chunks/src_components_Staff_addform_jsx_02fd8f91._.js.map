{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/codes/Jones-Gym/src/components/Staff_addform.jsx"],"sourcesContent":["// src\\components\\Staff_addform.jsx\r\n\"use client\";\r\nimport { GrClose } from \"react-icons/gr\";\r\nimport { useRouter } from 'next/navigation';\r\nimport { useState } from 'react';\r\n\r\nexport default function member_addpage() {\r\n  const router = useRouter();\r\n  const [error, setError] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      setSelectedFile(file);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n\r\n    const formData = new FormData(e.target);\r\n    \r\n    try {\r\n      let profilePicturePath = null;\r\n      \r\n      // Check if a profile picture was uploaded\r\n      const profilePictureFile = formData.get('profilePicture');\r\n      if (profilePictureFile && profilePictureFile.size > 0) {\r\n        console.log('Uploading profile picture...');\r\n        \r\n        // Create form data for image upload\r\n        const imageFormData = new FormData();\r\n        imageFormData.append('profilePicture', profilePictureFile);\r\n        imageFormData.append('gym_id', formData.get('gymID'));\r\n        \r\n        // Upload the image first\r\n        const imageResponse = await fetch('/api/upload_trainer_pic', {\r\n          method: 'POST',\r\n          body: imageFormData,\r\n        });\r\n        \r\n        if (!imageResponse.ok) {\r\n          const imageError = await imageResponse.json();\r\n          throw new Error(imageError.error || 'Failed to upload profile picture');\r\n        }\r\n        \r\n        const imageResult = await imageResponse.json();\r\n        profilePicturePath = imageResult.filePath;\r\n        console.log('Profile picture uploaded successfully:', profilePicturePath);\r\n      }\r\n      \r\n      // Prepare the staff data (excluding the file)\r\n      const staffData = {\r\n        gymID: formData.get('gymID'),\r\n        fullName: formData.get('fullName'),\r\n        gender: formData.get('gender'),\r\n        dob: formData.get('dob'),\r\n        location: formData.get('location'),\r\n        phone: formData.get('phone'),\r\n        whatsapp: formData.get('whatsapp'),\r\n        joiningdate: formData.get('joiningdate'),\r\n        profilePicturePath: profilePicturePath // Include the uploaded image path\r\n      };\r\n      \r\n      console.log('Submitting staff data:', staffData);\r\n      \r\n      // Submit the staff data to your main route\r\n      const response = await fetch('/api/add_staff', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(staffData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to add staff member');\r\n      }\r\n\r\n      const result = await response.json();\r\n      if (result.success) {\r\n        router.push('/staff'); // Redirect to staff list\r\n      } else {\r\n        setError(result.message || 'An error occurred');\r\n      }\r\n      \r\n    } catch (err) {\r\n      console.error('Error in handleSubmit:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"box\">\r\n      <div className=\"flex justify-between items-center text-xl pb-2 border-b md:text-2xl\">\r\n        <h2>Add Staff</h2>\r\n        <GrClose className=\"cursor-pointer hover:scale-90 hover:bg-black\" onClick={() => router.back()} />\r\n      </div>\r\n      \r\n      {error && <div className=\"mt-4 text-red-500\">{error}</div>}\r\n\r\n      <form onSubmit={handleSubmit} className=\"mt-5\">\r\n        {/* Grid layout for responsive columns */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          {/* Left Column */}\r\n          <div className=\"space-y-4\">\r\n            {/* Gym ID */}\r\n            <div>\r\n              <label htmlFor=\"gymID\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Trainer ID *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"gymID\"\r\n                name=\"gymID\"\r\n                placeholder=\"Enter trainer ID\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Full Name */}\r\n            <div>\r\n              <label htmlFor=\"fullName\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Full Name *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"fullName\"\r\n                name=\"fullName\"\r\n                placeholder=\"Enter full name\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D] focus:border-blue-500 focus:ring-1 focus:ring-blue-500\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Gender Dropdown */}\r\n            <div>\r\n              <label htmlFor=\"gender\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Gender *\r\n              </label>\r\n              <select\r\n                id=\"gender\"\r\n                name=\"gender\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D] appearance-none\"\r\n                required\r\n              >\r\n                <option value=\"\">Select Gender</option>\r\n                <option value=\"male\">Male</option>\r\n                <option value=\"female\">Female</option>\r\n                <option value=\"other\">Other</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Date of Birth */}\r\n            <div>\r\n              <label htmlFor=\"dob\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Date of Birth *\r\n              </label>\r\n              <div>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"dob\"\r\n                  name=\"dob\"\r\n                  className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Location */}\r\n            <div>\r\n              <label htmlFor=\"location\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Location *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"location\"\r\n                name=\"location\"\r\n                placeholder=\"Enter location\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Column */}\r\n          <div className=\"space-y-4\">\r\n            {/* Phone Number */}\r\n            <div>\r\n              <label htmlFor=\"phone\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Phone Number *\r\n              </label>\r\n              <input\r\n                type=\"tel\"\r\n                id=\"phone\"\r\n                name=\"phone\"\r\n                placeholder=\"Enter phone number\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* WhatsApp Number */}\r\n            <div>\r\n              <label htmlFor=\"whatsapp\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                WhatsApp Number\r\n              </label>\r\n              <input\r\n                type=\"tel\"\r\n                id=\"whatsapp\"\r\n                name=\"whatsapp\"\r\n                placeholder=\"Enter WhatsApp number\"\r\n                className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            {/* Joining date */}\r\n            <div>\r\n              <label htmlFor=\"joiningdate\" className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Joining date *\r\n              </label>\r\n              <div>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"joiningdate\"\r\n                  name=\"joiningdate\"\r\n                  className=\"p-4 w-full bg-[#232024] rounded-lg border border-[#3E3A3D]\"\r\n                  required\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Profile Picture Upload */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium mb-1 text-gray-300\">\r\n                Profile Picture *\r\n              </label>\r\n              <div className=\"flex items-center justify-center w-full\">\r\n                <label className=\"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-[#3E3A3D] rounded-lg cursor-pointer bg-[#232024] hover:bg-[#2E2A2D]\">\r\n                  <div className=\"flex flex-col items-center justify-center pt-5 pb-6\">\r\n                    {selectedFile ? (\r\n                      <>\r\n                        <svg className=\"w-8 h-8 mb-2 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n                        </svg>\r\n                        <p className=\"text-sm text-green-400 text-center\">\r\n                          {selectedFile.name}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-400\">\r\n                          ({(selectedFile.size / 1024 / 1024).toFixed(2)} MB)\r\n                        </p>\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <svg className=\"w-8 h-8 mb-2 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"></path>\r\n                        </svg>\r\n                        <p className=\"text-sm text-gray-400\">Click to upload image</p>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                  <input \r\n                    type=\"file\" \r\n                    name=\"profilePicture\" \r\n                    className=\"hidden\" \r\n                    accept=\"image/*\"\r\n                    onChange={handleFileChange}\r\n                    required\r\n                  />\r\n                </label>\r\n              </div>\r\n              {selectedFile && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    setSelectedFile(null);\r\n                    // Reset the file input\r\n                    const fileInput = document.querySelector('input[name=\"profilePicture\"]');\r\n                    if (fileInput) fileInput.value = '';\r\n                  }}\r\n                  className=\"mt-2 text-sm text-red-400 hover:text-red-300\"\r\n                >\r\n                  Remove file\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Form Buttons */}\r\n        <div className=\"flex justify-end gap-4 mt-8\">\r\n          <button\r\n            onClick={() => router.back()}\r\n            type=\"button\"\r\n            className=\"px-6 py-2.5 border border-[#3E3A3D] rounded-lg text-gray-300 hover:bg-[#2E2A2D] transition-colors\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            className={`px-6 py-2.5 text-white rounded-lg transition-colors ${isSubmitting ? 'bg-blue-400 cursor-not-allowed' : 'bg-blue-600 hover:bg-blue-700'}`}\r\n          >\r\n            {isSubmitting ? 'Saving...' : 'Save'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}